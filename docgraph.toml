# docgraph.toml - Document Graph Validation Configuration
# Based on the Dependency Model specification

[graph]
strict_node_types = true
strict_relations  = true
doc_types = ["ACT", "DAT", "IF", "ADR", "TERM", "FC"]

[node_types]
# Core specification types
UC  = { desc = "Use Case" }
FR  = { desc = "Functional Requirement" }
NFR = { desc = "Non-Functional Requirement" }
CON = { desc = "Constraint" }
ERR = { desc = "Error Definition" }

# Architecture types (Core Dependency Model)
CTX = { desc = "Context View Element" }
BB  = { desc = "Building Block" }
RT  = { desc = "Runtime View Scenario" }
DEP = { desc = "Deployment Element" }
CC  = { desc = "Cross-cutting Concept" }

# Documentation types (can be referenced by all core types)
ACT  = { desc = "Actor" }
DAT  = { desc = "Data Entity" }
IF   = { desc = "Interface Specification" }
ADR  = { desc = "Architecture Decision Record" }
TERM = { desc = "Terminology/Glossary" }
FC   = { desc = "Future Consideration" }

# Dependency Model:
# Specification Layer (derive): UC → FR → NFR/ERR, CON → FR/NFR
# Architecture Layer (depends on): CTX/BB → FR/NFR, RT → BB, CC → NFR/CON/ADR, DEP → BB/ADR

# ========== Specification Relations ==========

[references.UC]
from = []
from_min = 0
to = ["FR", "UC"]
to_min = 0

[references.FR]
from = ["UC"]
from_min = 1
to = ["NFR", "ERR"]
to_min = 0

[references.NFR]
from = ["FR", "CON"]
from_min = 1
to = []
to_min = 0

[references.ERR]
from = ["FR"]
from_min = 1
to = []
to_min = 0

[references.CON]
from = []
from_min = 0
to = ["FR", "NFR"]
to_min = 1

[references.ACT]
# Actor must be referenced by at least one Use Case
from = ["UC"]
from_min = 1
to = []
to_min = 0

# ========== Architecture Relations ==========

[references.CTX]
# Context View references ACT
from = []
from_min = 0
to = ["ACT"]
to_min = 1

[references.BB]
# Building Block references FR/NFR
from = []
from_min = 0
to = ["FR", "NFR"]
to_min = 1

[references.RT]
# Runtime View references BB
from = []
from_min = 0
to = ["BB"]
to_min = 1

[references.DEP]
# Deployment View references BB, ADR
from = []
from_min = 0
to = ["BB", "ADR"]
to_min = 1

[references.CC]
# Cross-cutting Concept references NFR, CON, ADR
from = []
from_min = 0
to = ["NFR", "CON", "ADR"]
to_min = 1
